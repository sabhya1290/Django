{% extends 'layout.html' %}

{% block content %}

<div class="max-w-6xl mx-auto p-6">

    <a href="{% url 'BrowseResources' %}" class="text-purple-600 underline text-sm mb-4 inline-block">
      ‚Üê Back to Browse Resources
    </a>

    <h1 class="text-3xl font-bold text-blue-800 mb-6">
      {{ branch }} Subjects & Resources
    </h1>

    <form method="get" class="mb-6">
      <input type="text" name="q" placeholder="Search subject or topic..."
             class="w-full p-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-purple-500">
    </form>

    {% comment %} {% for resource in resources %}
      <div class="bg-white p-6 rounded-2xl shadow-md mb-6">
        <h2 class="text-xl font-semibold text-blue-700">{{ resource.subject }}</h2>

        <ul class="mt-3 ml-4 list-disc text-sm text-gray-700">
         
            <li class="mb-1">
              {{ resource.title }} ‚Äî
              <a href="{{ resource.file.url }}" target="_blank" class="text-purple-600 underline hover:text-purple-800">
                View / Download
              </a>
            </li>
        </ul>
      </div>
    {% empty %}
      <p class="text-gray-500 text-center">No subjects found for {{ branch }}.</p>
    {% endfor %} {% endcomment %}
    
    {% for department, subjects in resources.items %}
    <div class="mb-10">
      <h2 class="text-2xl font-bold text-indigo-800 mb-3">üèõ {{ department }}</h2>
      {% for subject, resource_list in subjects.items %}
        <div class="bg-white p-6 rounded-2xl shadow-md mb-6">
          <h3 class="text-xl font-semibold text-blue-700">{{ subject }}</h3>
          <ul class="mt-3 ml-4 list-disc text-sm text-gray-700">
            {% for resource in resource_list %}
              <li class="mb-1">
                {{ resource.title }} ‚Äî
                <a href="{{ resource.file.url }}" target="_blank" class="text-purple-600 underline hover:text-purple-800">
                  View / Download
                </a>
                - uploaded by {{ resource.user.username }}
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endfor %}
    </div>
  {% empty %}
    <p class="text-gray-500 text-center">No subjects found for {{ branch }}.</p>
  {% endfor %}

  </div>
{% endblock %}